# üåê Nginx Web Server
### Beginner-Friendly Guide for DevOps Engineers and Cloud Engineers

#### ‚û°Ô∏è What is Nginx?
Nginx is high performance web server used to serve the websites and web applications 

## üß∞ Common DevOps Use cases
| Use case | Example |
| :-------- | :------- |
| Web Server     | Serves static and dynamic web content    |
| Reverse Proxy       | Routes client requests to backend servers    |   
| Load Balancer      | Distributes traffic across multiple servers   | 
| API Gateway      | Handles API routing, caching, and rate limiting   |  
| Ingress      | Managing traffic inside Kubernetes clusters   |

## üõ†Ô∏è Installation of the Nginx

üêß On Ubuntu/Debian

```bash
sudo apt update
sudo apt install nginx -y
```

üì¶ On RHEL/CentOS
```bash
sudo apt update
sudo apt install nginx -y
```
üê≥ On Docker Container

‚ùó Install the Docker Engine to run the Nginx On Docker 
```bash
docker pull nginx
docker run --name nginx -p 8080:80 -d nginx
```
Visit http://localhost:8080 it will open the default Nginx file in the web browser

## üìÇ Configuration File Structure for Nginx in Linux

| File / Directory              | Purpose                                                |
| ----------------------------- | ------------------------------------------------------ |
| `/etc/nginx/nginx.conf`       | Main Nginx configuration file                          |
| `/etc/nginx/sites-available/` | Stores all virtual host (server block) configurations  |
| `/etc/nginx/sites-enabled/`   | Contains symbolic links to enabled site configurations |
| `/etc/nginx/conf.d/`          | Stores additional modular configuration files          |
| `/var/www/html`               | Default web root directory                             |
| `/var/log/nginx/access.log`   | Records all incoming HTTP requests                     |
| `/var/log/nginx/error.log`    | Stores error and diagnostic logs                       |
| `/run/nginx.pid`              | Stores the Nginx master process ID                     |

# üåê Chapter 1: Nginx Web Server

## üö© Goal 
Learn how to use the Nginx to serve static content such as HTML, CSS, JavaScript and Images

## ‚û°Ô∏è What Is a Web Server?

A web server is software (and sometimes the hardware it runs on) that receives requests from clients (usually web browsers) and delivers web content such as HTML pages, images, CSS, JavaScript, or API responses over the internet using HTTP/HTTPS.

#### Types of Content Served
- Static content: HTML, CSS, images, videos
- Dynamic content: Generated by backend applications (PHP, Node.js, Python, etc.)

## üìÅ Default Web configuration path
| File / Directory              | Purpose                                                |
| ----------------------------- | ------------------------------------------------------ |
| `/etc/nginx/sites-available/default`       | Default config file server as web browser                          |
| `/var/www/html`               | Default web root directory                             |

## ‚öíÔ∏è Sample Nginx Web Server Configuration
```nginx
server {
    listen 80;
    server_name localhost;

    root /var/www/html;
    index index.html index.htm;

    location / {
        try_files $uri $uri/ =404;
    }

    error_log /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;
}
```
## Demo: Serve static Website 
1. Create a HTML file:

```bash
touch index.html
echo "<h1>Hello Learners from the created Nginx file</h1>" >> index.html
mv index.html /var/www/html/
```
2. Reload the Nginx

```bash
systemctl reload nginx
```
3. Test visit the http://localhotst:8080 or IP of the server with port 8080

## Configuration Explanation

| Directive | Description |
|---------|-------------|
| `listen 80` | Listens for HTTP requests |
| `server_name` | Domain or hostname |
| `root` | Website root directory |
| `index` | Default index file |
| `location /` | Request handling block |
| `try_files` | Checks if file exists |

## üîî Common HTTP Error Code
| Status Code | Name                       | Explanation                                                          |
| ----------- | -------------------------- | -------------------------------------------------------------------- |
| **200**     | OK                         | Request was successful and the server returned the expected response |
| **301**     | Moved Permanently          | Resource has been permanently moved to a new URL                     |
| **302**     | Found (Temporary Redirect) | Resource is temporarily available at a different URL                 |
| **400**     | Bad Request                | Server cannot process the request due to invalid syntax              |
| **401**     | Unauthorized               | Authentication is required to access the resource                    |
| **403**     | Forbidden                  | Server understood the request but denies access                      |
| **404**     | Not Found                  | Requested resource does not exist on the server                      |
| **405**     | Method Not Allowed         | HTTP method is not allowed for this resource                         |
| **408**     | Request Timeout            | Client took too long to send a request                               |
| **413**     | Payload Too Large          | Request body is larger than the server allows                        |
| **429**     | Too Many Requests          | Client sent too many requests in a given time                        |
| **500**     | Internal Server Error      | Generic server error                                                 |
| **502**     | Bad Gateway                | Server received an invalid response from an upstream server          |
| **503**     | Service Unavailable        | Server is currently unavailable or overloaded                        |
| **504**     | Gateway Timeout            | Upstream server did not respond in time                              |

## ü§ì Key Learnings

1. Role of a Web Server: Nginx serves web content to users, handles HTTP/HTTPS requests, and can act as a reverse proxy or load balancer.
2. Core Nginx Configuration: The main configuration file (nginx.conf) controls server behavior, virtual hosts, logging, and request handling.
3. HTTP Status Codes Matter: Understanding common HTTP error codes (e.g., 404, 500, 502) helps troubleshoot server and application issues efficiently.

# üåê Chapter 2: Nginx as Reverse Proxy

## ‚û°Ô∏è What is Reverse Proxy
A reverse proxy in NGINX is when NGINX sits in front of one or more backend servers and forwards client requests to them, then sends the responses back to the clients.

## How it works (step by step)

1. A user requests https://example.com
2. The request reaches NGINX
3. NGINX forwards the request to a backend server (for example, a Node.js, Python, or Java app)
4. The backend processes the request and sends a response to NGINX
5. NGINX returns the response to the user

## üìå Why use NGINX as a reverse proxy?

### Common reasons include:

- Security ‚Äì backend servers are not exposed directly to the internet
- Load balancing ‚Äì distribute traffic across multiple backend servers
- SSL/TLS termination ‚Äì handle HTTPS in NGINX instead of the app
- Caching ‚Äì speed up responses
- Compression ‚Äì reduce response size
- Centralized routing ‚Äì route different URLs to different services

## üìù Reverse Proxy Configuration on Linux
### üîß File Path: `/etc/nginx/sites-available/default`

The configuration file as shown in the below:
```nginx
server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
````
### Breakdown:
- proxy_pass ‚Üí forwards requests to your backend app
- proxy_set_header ‚Üí preserves original request metadata (like IP and host)

## üéØ Goal of Demo

We will access the python app from nginx with port 80 
```scss
Browser ‚Üí NGINX (port 80) ‚Üí Backend app (port 5000)
```
The user will access NGINX, not the backend directly.
### Step 1: Create a simple backend app (Python)
Install Flask 
```bash
pip install flask
```
Create the `app.py` file and write the below code
```python
from flask import Flask

app = Flask(__name__)

@app.route("/")
def home():
    return "Hello from Backend Server (Python Flask)"

@app.route("/api")
def api():
    return "This response came through NGINX Reverse Proxy"

if __name__ == "__main__":
    app.run(host="127.0.0.1", port=5000)
```
Run it:
```bash
python app.py
```
Test directly: 
```bash
http://localhost:5000
```
You should see:
```pgsql
Hello from Backend Server (Python Flask)
```
### Step 2: Edit the Nginx configuration file as shown below
```nginx
server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```
### Step 3: Test and Reload the Nginx
Check config: 
```bash
nginx -t
```
Once you status üÜó, Reload the Nginx
```bash
systemctl reload nginx
```
### Step 4: Test the reverse proxy
Now open in browser:
```html
http://localhost
```
You should see:
```pgsql
Hello from Backend Server (Python Flask)
```
## ü§ì Summary 
1. Forwards client requests to backend servers.
2. Hides and protects backend applications.
3. Improves performance with load balancing and SSL handling.